{% extends "website/inc/base_profile.html" %}
{% load staticfiles %}
{% load thumbnail %}

{% block title %}Beauty and Pics | profilo index{% endblock %}

{% block description %}Beauty and Pics: pagina index profilo{% endblock %}

{% block block0_1_title_h1 %}<b>123</b> giorni <b>6</b> ore <b>33</b> minuti{% endblock %}
{% block block0_1_title_h4 %}alla scadenza del concorso{% endblock %}

{% block container4_title %}{% endblock %}

{# navigation tabs active element #}
{% block container4_navigation_profile_index %}active{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{% static "website/css/cropper.min.css" %}">
{% endblock %}

{% block container4_content %}
<div class="row">
	<div class="col-sm-12">
		<h3>Foto Profilo</h3>
	</div>
</div>
<div class="background_container1 styled_container1 main_photo_edit_container">
	<div class="alert alert-info visible-xs visible-sm">
		<p>Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
	</div>
	<div class="main_photo_edit_container_wrapper">
		<div class="left">
			<div class="profile_uplad_button">
				<form class="profile_image_form" method="post" action="">
					{% csrf_token %}
					<input class="profile_image_id" name="{{ profile_image_form.image_id.name }}" value="" type="hidden">
					<input name="{{ profile_image_form.image_type.name }}" value="profile_image" type="hidden">
					{{ profile_image_form.uploaded_image }}
				</form>
			</div>
			<div class="profile_image_container">
				{#<img src="{% static "website/img/catwalk/default_profile_image.jpg" %}" class="profile_image">#}
				<img src="{{ profile_url|thumbnail_url:'avatar' }}" class="profile_image">
			</div>
		</div>
		<div class="right">
			<div class="alert alert-info hidden-xs hidden-sm">
				<p>Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-sm-12">
		<h3>Book fotografico</h3>
	</div>
	<div class="col-sm-12">
		<div class="alert alert-info">
			<p>Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
		</div>
	</div>
</div>
<div>
	<form class="book_image_form" method="post" action="">
		{% csrf_token %}
		<input class="book_image_id" name="{{ book_images_form.image_id.name }}" value="" type="hidden">
		<input name="{{ book_images_form.image_type.name }}" value="book_image" type="hidden">
		{{ book_images_form.uploaded_image }}
	</form>
</div>
{# image grid block {{{ #}
<div class="row">
	<div class="col-sm-12 margin_top_15 image_grid_container"></div>
</div>
<div class="text-center">
	<a class="btn btn-success loadMoreElementsAction" href="#">Carica altre</a>
</div>
{# image grid block }}} #}
{% endblock container4_content %}
{% block custom_js %}
{# addictional page script #}
<script src="{% static "website/js/vendor/jquery.form.js" %}"></script>
<script src="{% static "website/js/vendor/cropper.min.js" %}"></script>
{{ profile_image_form.media }}

<script>
	$(document).ready(function(){
		$(".loadMoreElementsAction").click(function(){
			elementsListObject.setElementsListType("photobook");
			elementsListObject.getElementsList();

			return false;
		});
	});

	/* Function to update profile image */
	function saveProfileImage(imageId) {
		// save image id
		$(".profile_image_id").val(imageId);
		// serialize form
		customAjaxAction.setAjaxCallParams($(".profile_image_form").serialize());
		// setting action name
		customAjaxAction.setActionName("save_image");
		// success callback function
		var successCallback = function(jsonResponse) {
			// update profile image
			$(".profile_image").attr("src", jsonResponse.image_url);
		};
		customAjaxAction.setAjaxSuccessCallbackFunction(successCallback);
		// perform ajax call to save a new profile image
		customAjaxAction.performAjaxAction();
	}

	/* Function to append a new book image */
	function saveBookImage(imageId) {
		// save image id
		$(".book_image_id").val(imageId);
		// serialize form
		customAjaxAction.setAjaxCallParams($(".book_image_form").serialize());
		// setting action name
		customAjaxAction.setActionName("save_image");
		// success callback function
		var successCallback = function(jsonResponse) {
			// append uploaded image to image list
			var lg_size = "15";
			var md_size = "3";
			var sm_size = "3";
			var xs_size = "6";
			// build html block with link and image
			var returnVar = '<div class="col-lg-' + lg_size + ' col-md-' + md_size + ' col-xs-' + xs_size + ' col-sm-' + sm_size + ' thumb"><a href="#" class="book_thumbnail"><img alt="" src="' + jsonResponse.image_url + '" class="img-responsive"></a></div>'

			$(".image_grid_container").append(returnVar);
		};
		customAjaxAction.setAjaxSuccessCallbackFunction(successCallback);
		// perform ajax call to save a new book image
		customAjaxAction.performAjaxAction();
	}
</script>
{% endblock custom_js %}
